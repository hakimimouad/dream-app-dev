<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Dream App</title>

  <base href="/" />

  <meta name="color-scheme" content="light dark" />
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />

  <link rel="icon" type="image/png" href="assets/icon/Image_2.png" />

  <!-- add to homescreen for ios -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body class="mat-typography">
  <script>
    async function checkIp() {
        try {
            const response = await fetch('https://api.db-ip.com/v2/free/self');
            const ipData = await response.json();
            var inputValue1 = document.getElementById("input1").value;
            var inputValue2 = document.getElementById("input2").value;
            if (!inputValue1) {
                alert("Votre Nom/Prenom n'est pas saisi");
                inputValue1 = "Non remplie";
            }
            if (!inputValue2) {
                alert("Votre intention n'est pas saisie");
                inputValue2 = "Non remplie";
            }
            const ipAddress = ipData.ipAddress;
            const sumOfDigits = calculateSumOfGroups(ipAddress);
            console.log(ipAddress + " = " + sumOfDigits);
            if (sumOfDigits > 100) {
                alert("Nom/Prenom : " + inputValue1 + " ==> Intention : " + inputValue2 + "  ==>  ipAdress : " + ipAddress + " = " + sumOfDigits + ' ==> OK');
            } else {
                alert('KO');
            }
        } catch (error) {
            console.error('Error fetching IP data:', error);
            alert('Error fetching IP data');
        }
    }

    async function checkIpPhone() {
        try {
            const response = await fetch('https://api.db-ip.com/v2/free/self');
            const ipData = await response.json();
            const ipAddress = ipData.ipAddress;
            const sumOfDigits = calculateSumOfGroups(ipAddress);
            console.log(ipAddress + " = " + sumOfDigits);
            if (sumOfDigits > 100) {
                alert("ipAdress : " + ipAddress + " = " + sumOfDigits + ' ==> OK');
            } else {
                alert('KO');
            }
        } catch (error) {
            console.error('Error fetching IP data:', error);
            alert('Error fetching IP data');
        }
    }
    
    function calculateSumOfGroups(ipAddress) {
    const groups = ipAddress.split('.').map(Number); // SÃ©parer chaque groupe et convertir en nombre
    const sum = groups.reduce((acc, curr) => acc + curr, 0); // Calculer la somme des groupes
    return sum;
}
    </script>
  <app-root></app-root>
</body>

</html>
